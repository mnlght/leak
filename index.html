<!DOCTYPE html>
<html lang="en">
<head>
    <title>Shower Presentation Engine</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="node_modules/@shower/ribbon/styles/styles.css">
    <style>
        .shower {
            --slide-ratio: calc(16 / 9);
        }
    </style>
</head>
<body class="shower list">

    <header class="caption">
        <h1>Shower Presentation Engine</h1>
        <p>Yours Truly, Famous Inc.</p>
    </header>
    <section class="slide">
        <h1>Memory leak</h1>
        <p>Heap out of memory или утечки памяти в Node.js</p>
    </section>
    <section class="slide">
        <h1>План доклада</h1>
        <ul>
            <li class="next">Краткий экскурс в архитектуру Node.js</li>
            <li class="next">Утечки памяти - определение, кейсы и дебаггинг</li>
        </ul>
    </section>
    <section class="slide">
        <h1>Архитектура Node.js - 1й вариант</h1>
    </section>
    <section class="slide">
        <img class="cover" src="images/arch-begin.png">
    </section>
    <section class="slide">
        <h1>V8</h1>
    </section>
    <section class="slide">
        <img class="cover" src="images/v8zmz.jpg">
    </section>
    <section class="slide">
        <img class="cover" src="images/v8.png">
    </section>
    <section class="slide">
        <h1>V8</h1>
        <ul>
            <li class="next">Разработан датчанами из Google для повышения производительности и масштабируемости</li>
            <li class="next">Написан на C++</li>
            <li class="next">Благодаря нему можно использовать Node.js для написания обычных приложений (VScode, Postman)</li>
        </ul>
    </section>
    <section class="slide">
        <h1>А что было до V8</h1>
        <ul>
            <li class="next">JS-код был только клиентским и мог воспроизводиться только в браузере</li>
        </ul>
    </section>
    <section class="slide">
        <h1>Поэтому, он полезен ещё тем, что - </h1>
        <ul>
            <li class="next">Предоставляет функции, связанные с запуском JS-файлов (компилирует и выполняет)</li>
            <li class="next">Обрабатывает стек вызовов*</li>
            <li class="next">Управляет выделением памяти для объектов JS</li>
            <li class="next">Сбор мусора</li>
        </ul>
    </section>
    <section class="slide">
        <h1>libuv</h1>
    </section>
    <section class="slide">
        <img class="cover" src="images/libuv.png">
    </section>
    <section class="slide">
        <h1>libuv</h1>
        <ul>
            <li class="next">Стороняя библиотека</li>
            <li class="next">Написана на C</li>
            <li class="next">Предоставляет доступ к операционной системе</li>
            <li class="next">Предлагает функции, самые важные из которых - Event loop, Streaming, FileAsync, Pipes, ChildProccesses</li>
        </ul>
    </section>
    <section class="slide">
        <h1>Как это работает всё вместе?</h1>
    </section>
    <section class="slide">
        <img class="cover" src="images/lv8.png">
    </section>
    <section class="slide">
        <h1>Доп.вопрос - чем эта модель отличается от асинхронности в других ЯП?</h1>
        <ul>
            <li class="next">Неблокирующий ввод-вывод, обратный вызов</li>
            <li class="next">Go - параллелизм с доступом ко всем ядрам ЦП и общением через каналы</li>
        </ul>
    </section>
    <section class="slide">
        <h1>V8 и память</h1>
        <ul>
            <li class="next">V8 - движок</li>
            <li class="next">В его ЖЦ есть операции выделения памяти под собственные объекты и структуры данных</li>
            <li class="next">Но нас интересуют stack и heap (стек и куча)</li>
        </ul>
    </section>
    <section class="slide">
        <h1>V8 и память. Стек</h1>
        <ul>
            <li class="next">Это структура данных</li>
            <li class="next">Список элементов, которые обрабатываются и хранятся по принципу LIFO</li>
            <li class="next">В стеке JS хранит примитивные типы данных (string/number/boolean/null/undefined) и ссылки на всё остальное</li>
            <li class="next">Стек - статическое* выделение памяти</li>
        </ul>
    </section>
    <section class="slide">
        <h1>V8 и память. Куча</h1>
        <ul>
            <li class="next">Это дерево</li>
            <li class="next">Хранятся элементы, размер которых неизвестен заранее</li>
            <li class="next">V8 выделяет на них память по мере необходимости</li>
            <li class="next">Куча - динамическое* выделение памяти</li>
        </ul>
    </section>
    <section class="slide">
        <h1>Доп.вопрос - чем этот подход в работе с памятью отличается от других ЯП?</h1>
    </section>
    <section class="slide">
        <h1>V8 и мусор</h1>
        <ul>
            <li class="next">Объекты-сироты из кучи, на которые никто не ссылается из стека (прямо или косвенно) являются мусором</li>
            <li class="next">Сборщик мусора освобождает неиспользуемую память для того, чтобы повторно её использовать</li>
            <li class="next">В V8 СМ'ы поколенческие, используются два этапа, но оба stop the world</li>
        </ul>
    </section>
    <section class="slide">
        <h1>Доп.вопрос - как справляются языки без СМ?</h1>
        <ul>
            <li class="next">Ручное управление памятью</li>
            <li class="next">Rust - области видимости</li>
        </ul>
    </section>
    <section class="slide">
        <h1>Утечки памяти</h1>
    </section>


    <footer class="badge">
        <a href="https://github.com/shower/shower">Fork me on GitHub</a>
    </footer>

    <div class="progress"></div>

    <script src="node_modules/@shower/core/dist/shower.js"></script>
    <!-- Copyright © 2024 Yours Truly, Famous Inc. -->

</body>
</html>
